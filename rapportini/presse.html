<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Presse</title>
    <link rel="stylesheet" href="assets/main.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .table {
            width: 60%;
            border-collapse: collapse;
            margin: 30px auto;
        }

        .table input {
            width: 100%;
        }

        .small {
            width: 40% !important;
            margin: 30px auto;
        }
        #container{
            text-align: center;
        }
        #center-container{
            width: 60%;
            margin: 0 auto;
            display: flex;
            flex: 1;
        }
        #left, #right{
            width: 40%;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
        }
        #right .table, #left .table{
            width: 100%;
        }
    </style>
</head>

<body>
    <br><br>
    <h1 class="title">RAPPORTINO PRESSE</h1>
    <!--HEADER-->
    <form method="POST" id="dataForm">
        <input size="40" name="NOME" placeholder="Inserisci il nome" required>
        <input name="DATA" type="date" required pattern="\d{4}-\d{2}-\d{2}" placeholder="aaaa-mm-gg">
        <select name="TURNO" id="turno" required>
            <option value="M">Mattino</option>
            <option value="P">Pomeriggio</option>
            <option value="N">Notte</option>
        </select>
        <div id="container">
            <table class="table">
                <thead>
                    <th></th>
                    <th colspan="2">Porcellanato</th>
                    <th colspan="2">PH2000 EX 30</th>
                    <th colspan="2">PH2090 33 N</th>
                </thead>
                <tbody>
                    <tr>
                        <th>SPESSORE mm.</th>
                        <td colspan="2"><input type="text"></td>
                        <td colspan="2"><input type="text"></td>
                        <td colspan="2"><input type="text"></td>
                    </tr>
                    <tr>
                        <th>PULIZIA STAMPO ORE</th>
                        <td><input type="checkbox" name="puliziastampo_porc-check"></td>
                        <td><input type="time" name="puliziastampo_porc-input" disabled></td>
                        <td><input type="checkbox" name="puliziastampo_ph2000-check"></td>
                        <td><input type="time" name="puliziastampo_ph2000-input" disabled></td>
                        <td><input type="checkbox" name="puliziastampo_ph2090-check"></td>
                        <td><input type="time" name="puliziastampo_ph2090-input" disabled></td>
                    </tr>
                    <tr>
                        <th>PULIZIA GRIGLIA</th>
                        <td><input type="checkbox" name="puliziagriglia_porc-check"></td>
                        <td><input type="time" name="puliziagriglia_porc-input" disabled></td>
                        <td><input type="checkbox" name="puliziagriglia_ph2000-check"></td>
                        <td><input type="time" name="puliziagriglia_ph2000-input" disabled></td>
                        <td><input type="checkbox" name="puliziagriglia_ph2090-check"></td>
                        <td><input type="time" name="puliziagriglia_ph2090-input" disabled></td>
                    </tr>
                    <tr>
                        <th>2° PULIZIA STAMPO</th>
                        <td><input type="checkbox" name="puliziastampo2_porc-check"></td>
                        <td><input type="time" name="puliziastampo2_porc-input" disabled></td>
                        <td><input type="checkbox" name="puliziastampo2_ph2000-check"></td>
                        <td><input type="time" name="puliziastampo2_ph2000-input" disabled></td>
                        <td><input type="checkbox" name="puliziastampo2_ph2090-check"></td>
                        <td><input type="time" name="puliziastampo2_ph2090-input" disabled></td>
                    </tr>
                    <tr>
                        <th>2° PULIZIA GRIGLIA</th>
                        <td><input type="checkbox" name="puliziagriglia2_porc-check"></td>
                        <td><input type="time" name="puliziagriglia2_porc-input" disabled></td>
                        <td><input type="checkbox" name="puliziagriglia2_ph2000-check"></td>
                        <td><input type="time" name="puliziagriglia2_ph2000-input" disabled></td>
                        <td><input type="checkbox" name="puliziagriglia2_ph2090-check"></td>
                        <td><input type="time" name="puliziagriglia2_ph2090-input" disabled></td>
                    </tr>
                    <tr>
                        <th>CONTROLLO SOFFIETTO ORE</th>
                        <td><input type="checkbox" name="controllosoffiettoore_porc-check"></td>
                        <td><input type="time" name="controllosoffiettoore_porc-input" disabled></td>
                        <td><input type="checkbox" name="controllosoffiettoore_ph2000-check"></td>
                        <td><input type="time" name="controllosoffiettoore_ph2000-input" disabled></td>
                        <td><input type="checkbox" name="controllosoffiettoore_ph2090-check"></td>
                        <td><input type="time" name="controllosoffiettoore_ph2090-input" disabled></td>
                    </tr>
                    <tr>
                        <th>CONTROLLO CAVI RISCALDATI</th>
                        <td><input type="checkbox" name="controllocavirisc_porc-check"></td>
                        <td><input type="text" name="controllocavirisc_porc-input" disabled></td>
                        <td><input type="checkbox" name="controllocavirisc_ph2000-check"></td>
                        <td><input type="text" name="controllocavirisc_ph2000-input" disabled></td>
                        <td><input type="checkbox" name="controllocavirisc_ph2090-check"></td>
                        <td><input type="text" name="controllocavirisc_ph2090-input" disabled></td>
                    </tr>
                    <tr>
                        <th>SETACCINO SCARICA</th>
                        <td><input type="checkbox" name="setaccinoscarica_porc-check"></td>
                        <td><input type="text" name="setaccinoscarica_porc-input" disabled></td>
                        <td><input type="checkbox" name="setaccinoscarica_ph2000-check"></td>
                        <td><input type="text" name="setaccinoscarica_ph2000-input" disabled></td>
                        <td><input type="checkbox" name="setaccinoscarica_ph2090-check"></td>
                        <td><input type="text" name="setaccinoscarica_ph2090-input" disabled></td>
                    </tr>
                    <tr>
                        <th>CONTROLLO RETE SETACCI</th>
                        <td><input type="checkbox" name="contretesetacci_porc-check"></td>
                        <td><input type="text" name="contretesetacci_porc-input" disabled></td>
                        <td><input type="checkbox" name="contretesetacci_ph2000-check"></td>
                        <td><input type="text" name="contretesetacci_ph2000-input" disabled></td>
                        <td><input type="checkbox" name="contretesetacci_ph2090-check"></td>
                        <td><input type="text" name="contretesetacci_ph2090-input" disabled></td>
                    </tr>
                    <tr>
                        <th>VUOTATO TRAMOGGINO</th>
                        <td><input type="checkbox" name="vuotatotramoggino_porc-check"></td>
                        <td><input type="text" name="vuotatotramoggino_porc-input" disabled></td>
                        <td><input type="checkbox" name="vuotatotramoggino_ph2000-check"></td>
                        <td><input type="text" name="vuotatotramoggino_ph2000-input" disabled></td>
                        <td><input type="checkbox" name="vuotatotramoggino_ph2090-check"></td>
                        <td><input type="text" name="vuotatotramoggino_ph2090-input" disabled></td>
                    </tr>
                    <tr>
                        <th>CAMBIO MARCHE</th>
                        <td><input type="checkbox" name="cambiomarche_porc-check"></td>
                        <td><input type="text" name="cambiomarche_porc-input" disabled placeholder="Serie marche montate"></td>
                        <td><input type="checkbox" name="cambiomarche_ph2000-check"></td>
                        <td><input type="text" name="cambiomarche_ph2000-input" disabled placeholder="Serie marche montate"></td>
                        <td><input type="checkbox" name="cambiomarche_ph2090-check"></td>
                        <td><input type="text" name="cambiomarche_ph2090-input" disabled placeholder="Serie marche montate"></td>
                    </tr>
                    <tr>
                        <th>CAMBIO TAMPONI</th>
                        <td><input type="checkbox" name="cambiotamponi_porc-check"></td>
                        <td><input type="text" name="cambiotamponi_porc-input" disabled placeholder="Tipo di tampone montato"></td>
                        <td><input type="checkbox" name="cambiotamponi_ph2000-check"></td>
                        <td><input type="text" name="cambiotamponi_ph2000-input" disabled placeholder="Tipo di tampone montato"></td>
                        <td><input type="checkbox" name="cambiotamponi_ph2090-check"></td>
                        <td><input type="text" name="cambiotamponi_ph2090-input" disabled placeholder="Tipo di tampone montato"></td>
                    </tr>
                    <tr>
                        <th>SECONDA PRESSATA bar</th>
                        <td colspan="2"><input type="text" name="sec-press-bar_porc"></td>
                        <td colspan="2"><input type="text" name="sec-press-bar_ph2000"></td>
                        <td colspan="2"><input type="text" name="sec-press-bar_ph2090"></td>
                    </tr>
                    <tr>
                        <th>Temp. Bruciatore 1 BT11</th>
                        <td colspan="2"><input type="text" name="temp-bruc1-bt11_porc"></td>
                        <td colspan="2"><input type="text" name="temp-bruc1-bt11_ph2000"></td>
                        <td colspan="2"><input type="text" name="temp-bruc1-bt11_ph2090"></td>
                    </tr>
                    <tr>
                        <th>Temp. Bruciatore 2 BT13</th>
                        <td colspan="2"><input type="text" name="temp-bruc2-bt13_porc"></td>
                        <td colspan="2"><input type="text" name="temp-bruc2-bt13_ph2000"></td>
                        <td colspan="2"><input type="text" name="temp-bruc2-bt13_ph2090"></td>
                    </tr>
                    <tr>
                        <th>Temp. STABILIZZ. BT12</th>
                        <td colspan="2"><input type="text" name="temp-stabilizz-bt12_porc"></td>
                        <td colspan="2"><input type="text" name="temp-stabilizz-bt12_ph2000"></td>
                        <td colspan="2"><input type="text" name="temp-stabilizz-bt12_ph2090"></td>
                    </tr>
                    <tr>
                        <th>Hz INVERTER CAMINO</th>
                        <td colspan="2"><input type="text" name="hzinverter-camino_porc"></td>
                        <td colspan="2"><input type="text" name="hzinverter-camino_ph2000"></td>
                        <td colspan="2"><input type="text" name="hzinverter-camino_ph2090"></td>
                    </tr>
                    <tr>
                        <th>UMIDITA' RESIDUA</th>
                        <td colspan="2"><input type="text" name="umiditaresidua_porc"></td>
                        <td colspan="2"><input type="text" name="umiditaresidua_ph2000"></td>
                        <td colspan="2"><input type="text" name="umiditaresidua_ph2090"></td>
                    </tr>
                </tbody>
            </table>
            <div id="center-container">
                <div id="right">
                    <table class="table">
                        <tr>
                            <th>PULIZIE REPARTO</th>
                            <td><input type="checkbox" name="puliziereparto-check"></td>
                            <td><input type="text" name="puliziereparto-input" disabled></td>
                        </tr>
                        <tr>
                            <th>LAVORI SETTIMANALI</th>
                            <td><input type="checkbox" name="lavorisettimanali-check"></td>
                            <td><input type="text" name="lavorisettimanali-input" disabled></td>
                        </tr>
                        <tr>
                            <th>VUOTI AL FORNO</th>
                            <td><input type="checkbox" name="vuotialforno-check"></td>
                            <td><input type="text" name="vuotialforno-input" disabled></td>
                        </tr>
                    </table>
                    <table class="table">
                        <thead>
                            <tr>
                                <th colspan="4">PULIZIA CALAMITE</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><input type="text" name="calamite1"></td>
                                <td><input type="text" name="calamite2"></td>
                                <td><input type="text" name="calamite3"></td>
                                <td><input type="text" name="calamite4"></td>
                            </tr>
                            <tr>
                                <td><input type="text" name="calamite5"></td>
                                <td><input type="text" name="calamite6"></td>
                                <td><input type="text" name="calamite7"></td>
                                <td><input type="text" name="calamite8"></td>
                            </tr>
                            <tr>
                                <td><input type="text" name="calamite9"></td>
                                <td><input type="text" name="calamite10"></td>
                                <td><input type="text" name="calamite12"></td>
                                <td><input type="text" name="calamite13"></td>
                            </tr>
                            <tr>
                                <td><input type="text" name="calamite14"></td>
                                <td><input type="text" name="calamite15"></td>
                                <td><input type="text" name="calamite16"></td>
                                <td><input type="text" name="calamite17"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div id="left">
                    <table class="table">
                        <thead>
                            <tr>
                                <th colspan="5">PRELIEVO TERRA</th>
                            </tr>
                            <tr>
                                <th></th>
                                <th>MUGNAIO</th>
                                <th>SILOS</th>
                                <th>DATA</th>
                                <th>UMIDITA'</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><input type="checkbox" name="prelievo1-check"></td>
                                <td><input type="text" disabled name="prelievo1-input"></td>
                                <td><input type="text" disabled name="prelievo1-input"></td>
                                <td><input type="text" disabled name="prelievo1-input"></td>
                                <td><input type="text" disabled name="prelievo1-input"></td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" name=""></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" name=""></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" name=""></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" name=""></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" name=""></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" name=""></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" name=""></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" name=""></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" name=""></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" name=""></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" name=""></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                                <td><input type="text" disabled></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <h2>Problemi Vari / Annotazioni</h2>
            <textarea name="comunicazioni" cols="100" rows="4"></textarea>
        </div>
        <input type="hidden" name="reparto" value="presse">
        <input type="submit" name="save" id="save" value="Salva">
        <button type="button" name="fine-turno" id="fine-turno" disabled>Fine Turno</button>
    </form>
    <script src="assets/script.js"></script>
    <script>
        var checkboxes = document.querySelectorAll('input[type=checkbox]');
        for (var j = 0; j < checkboxes.length; j++) {
            checkboxes[j].addEventListener('change', function () {
                var name = this.name.split('-')[0];
                if (this.checked) {
                    for(var k = 0; k<document.getElementsByName(name + '-input').length;k++){
                        document.getElementsByName(name + '-input')[k].removeAttribute("disabled");
                        document.getElementsByName(name + '-input')[k].setAttribute("required", "required");
                    }
                } else {
                    for(var k = 0; k<document.getElementsByName(name + '-input').length;k++){
                        document.getElementsByName(name + '-input')[k].setAttribute("disabled", "disabled");
                        document.getElementsByName(name + '-input')[k].removeAttribute("required");
                    }  
                }
            });
        }

        document.addEventListener('DOMContentLoaded', function () {
            if (localStorage.sceltal1) {
                var jsonSceltaDati = JSON.parse(localStorage.presse);
                var storageKeys = Object.keys(jsonSceltaDati);
                for (var k = 0; k < storageKeys.length; k++) {
                    //codice per oscurare gli input se non sono selezionate le checkbox
                    if (document.getElementsByName(storageKeys[k])[0].type == "checkbox") {
                        var checkbox = document.getElementsByName(storageKeys[k])[0]
                        var name = checkbox.name.split('-')[0];
                        checkbox.checked = jsonSceltaDati[storageKeys[k]];
                        if (this.checked) {
                            document.getElementsByName(name + '-input')[0].removeAttribute("disabled");
                            document.getElementsByName(name + '-input')[0].setAttribute("required", "required");
                        } else {
                            document.getElementsByName(name + '-input')[0].setAttribute("disabled", "disabled");
                            document.getElementsByName(name + '-input')[0].removeAttribute("required");
                        }
                    } else
                        document.getElementsByName(storageKeys[k])[0].value = jsonSceltaDati[storageKeys[k]];
                }
            }
        });

        document.getElementById('dataForm').addEventListener('submit', function (event) {
            event.preventDefault();
            saveToLocalStorage();
        });

        var btnCheckUnlock = setInterval(function () {
            if (localStorage.sceltal1) var turno = JSON.parse(localStorage.sceltal1)['TURNO']
            if (turno) {
                var date = new Date();
                var timeHour = date.getHours();
                var oraSbloccoBtn;
                switch (turno) {
                    case 'M':
                        oraSbloccoBtn = 11
                        break;
                    case 'P':
                        oraSbloccoBtn = 19
                        break;
                    case 'N':
                        oraSbloccoBtn = 3
                        break
                    default:
                }
                if (timeHour >= oraSbloccoBtn) {
                    document.getElementById("fine-turno").removeAttribute("disabled")
                    document.getElementById("fine-turno").addEventListener("click", function () {
                        localStorageDataSend('presse');//cambia per diversi rapportini
                    });
                    clearInterval(btnCheckUnlock)
                }
            }
        }, 1000);
    </script>
</body>
</html>